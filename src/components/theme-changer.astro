---
import Button from "./ui/button.astro";
---

<theme-changer>
  <Button>
    <i class="dark:flex hidden transition-all" data-lucide="sun"></i>
    <i class="dark:hidden flex transition-all" data-lucide="moon"></i>
  </Button>
</theme-changer>

<script>
  class ThemeChanger extends HTMLElement {
    connectedCallback() {
      const button = this.querySelector("button");

      if (!button) {
        console.error("Button not found.");
        return;
      }

      button.addEventListener("click", () => {
        document.body.classList.toggle("dark");
      });
    }
  }
  customElements.define("theme-changer", ThemeChanger);
</script>
