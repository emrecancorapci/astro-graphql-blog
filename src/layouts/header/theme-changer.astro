---
import Button from "@/components/ui/button.astro";
import Icon from "@/components/ui/icon.astro";
---

<theme-changer>
  <Button
    class="size-10 rounded-full p-0 shadow-[inset_0_0_4px_2px] shadow-zinc-800/10 drop-shadow-[0_0_16px_rgba(0,0,0,0.05)] dark:shadow-zinc-900/20"
    variant="ghost"
  >
    <Icon class="hidden transition-all dark:flex" icon="sun" />
    <Icon class="flex transition-all dark:hidden" icon="moon" />
  </Button>
</theme-changer>

<script>
  class ThemeChanger extends HTMLElement {
    connectedCallback() {
      const button = this.querySelector("button");

      if (!button) {
        console.error("Button not found.");
        return;
      }

      button.addEventListener("click", () => {
        document.body.classList.toggle("dark");
      });
    }
  }
  customElements.define("theme-changer", ThemeChanger);
</script>
